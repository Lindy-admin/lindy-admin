<h1>Courses</h1>

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Start</th>
      <th>End</th>
      <th>Registrations</th>
    </tr>
  </thead>

  <tbody>
    <% @courses.each do |course| %>
      <tr data-link="<%= url_for(course) %>">
        <td><%= course.title %></td>
        <td><%= truncate(course.description, length: 40) %></td>
        <td><%= course.registration_start %></td>
        <td><%= course.registration_end %></td>
        <td>
          <% if course.roles == "lead_and_follow" %>
            <strong>Accepted:</strong>
            <%= "#{course.leads.where(status:"accepted").count} / #{course.follows.where(status:"accepted").count}" %>
            <br />
            <strong>Waitinglist:</strong>
            <%= "#{course.leads.where(status:"waitinglist").count} / #{course.follows.where(status:"waitinglist").count}" %>
            <br />
            <strong>Triage:</strong>
            <%= "#{course.leads.where(status:"triage").count} / #{course.follows.where(status:"triage").count}" %>
          <% elsif course.roles == "solo"%>
            <strong>Accepted:</strong>
            <%= "#{course.solos.where(status:"accepted").count}" %>
            <br />
            <strong>Waitinglist:</strong>
            <%= "#{course.solos.where(status:"waitinglist").count}" %>
            <br />
            <strong>Triage:</strong>
            <%= "#{course.solos.where(status:"triage").count}" %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @courses %>

<br>

<%= link_to 'New Course', new_course_path, class: "btn btn-success" %>
